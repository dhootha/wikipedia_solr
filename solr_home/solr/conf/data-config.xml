<dataConfig>
        <dataSource type="FileDataSource" encoding="UTF-8" allowNonFile="true"/>

<!-- 
        <dataSource type="FileDataSource" encoding="UTF-8"/>
-->
        <document>
        <entity name="page"
                processor="XPathEntityProcessor"
                stream="true"
                forEach="/mediawiki/page/"
		url="${dataimporter.request.dataFile}"

                transformer="RegexTransformer, wikipedia_solr.WikimediaToTextTransformer"
                >
<!--  
		url="${dataimporter.request.solrHome}/first_172.xml" 
          transformer="RegexTransformer,DateFormatTransformer, wikipedia_solr.WikimediaToTextTransformer"
                url="/Users/patrickmullen/code/general_cybernetics/wikipedia_solr/solr_home/solr/short_one.xml"

-->
            <field column="id"        xpath="/mediawiki/page/id" />
            <field column="title"     xpath="/mediawiki/page/title" />
            <field column="wikimediaMarkup"      xpath="/mediawiki/page/revision/text" />

<!--
            <field column="revision"  xpath="/mediawiki/page/revision/id" />
            <field column="user"      xpath="/mediawiki/page/revision/contributor/username" />
            <field column="userId"    xpath="/mediawiki/page/revision/contributor/id" />
            <field column="timestamp" xpath="/mediawiki/page/revision/timestamp" dateTimeFormat="yyyy-MM-dd'T'hh:mm:ss'Z'" />
            <field column="wikimediaMarkup"      xpath="/mediawiki/page/revision/text" />
-->


            <field column="$skipDoc"  regex="^#REDIRECT .*" replaceWith="true" sourceColName="wikimediaMarkup"/>
       </entity>
        </document>
</dataConfig>
