#!/bin/bash
set -e
. ~/.profile


cd $GC_WIKIPEDIA_REPO_ROOT
cd apps/start_solr

rm -rf start_solr_wrap.app
$GC_WIKIPEDIA_REPO_ROOT/apps/appify  start_solr_wrap

cd $GC_WIKIPEDIA_REPO_ROOT
cd apps/update

compile_app ()
{
rm -rf $1.app
$GC_WIKIPEDIA_REPO_ROOT/apps/appify  $1

touch $GC_WIKIPEDIA_REPO_ROOT/apps/$1.app
rm -rf $GC_WIKIPEDIA_REPO_ROOT/apps/$1.app
mv $1 $GC_WIKIPEDIA_REPO_ROOT/apps/
}


U=$GC_WIKIPEDIA_REPO_ROOT/apps/update
rm -rf $U/recompile_apps_wrap.app

cd $GC_WIKIPEDIA_REPO_ROOT/apps/reindex
touch  index_1000_wrap.app
rm -rf index_1000_wrap.app



cd $GC_WIKIPEDIA_REPO_ROOT/apps/wrappers

compile_app update_all
compile_app git_update
compile_app download_dump
compile_app make_helper_files

compile_app index_1_000
compile_app index_10_000_wrap
compile_app index_100_000_wrap
compile_app index_all_wrap

